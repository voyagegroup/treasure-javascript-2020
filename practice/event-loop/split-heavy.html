<!DOCTYPE html>
<head>
    <title>event loop</title>
</head>
<body>
    <script>
        let i = 0;
        let start = Date.now();

        function count() {
            do {
                i++;
            } while(i % 1e6 != 0);

            if (i === 1e9) {
                alert("Done in " + (Date.now() - start) + 'ms');
            } else {
                setTimeout(count);
            }
        };
        count();
    </script>
</body>
</html>